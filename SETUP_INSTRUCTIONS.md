# Attendance System Setup Instructions

This project consists of three main components:
1. **Express Backend** (Node.js) - Port 5000
2. **FastAPI Backend** (Python) - Port 8001  
3. **React Frontend** (Vite) - Port 3000

## Prerequisites

### Node.js Setup
1. Install Node.js (v16 or higher)
2. Install dependencies for Express backend:
   ```bash
   cd Backend
   npm install
   ```

3. Install dependencies for React frontend:
   ```bash
   cd attendance-system
   npm install
   ```

### Python Setup
1. Install Python 3.8 or higher
2. Install Python dependencies:
   ```bash
   cd FaceAuth
   pip install -r requirements.txt
   ```

## Quick Start

### Option 1: Use the startup script (Recommended)
- **Windows**: Double-click `start_servers.bat`
- **Linux/Mac**: Run `./start_servers.sh`

### Option 2: Manual startup

1. **Start Express Backend** (Terminal 1):
   ```bash
   cd Backend
   npm start
   ```
   Server will run on: http://localhost:5000

2. **Start FastAPI Backend** (Terminal 2):
   ```bash
   cd FaceAuth
   python main.py
   ```
   Server will run on: http://localhost:8001

3. **Start React Frontend** (Terminal 3):
   ```bash
   cd attendance-system
   npm run dev
   ```
   Server will run on: http://localhost:3000

## How It Works

1. **QR Code Generation**: Express backend generates QR codes with session data
2. **QR Code Scanning**: React frontend scans QR codes using camera
3. **QR Verification**: Express backend verifies the scanned QR data
4. **Face Authentication**: After QR verification, FastAPI backend handles face recognition
5. **Complete Flow**: QR scan â†’ Face authentication â†’ Attendance marked

## API Endpoints

### Express Backend (Port 5000)
- `GET /api/qr/generate?sessionId=123` - Generate QR code
- `POST /api/qr/verify` - Verify QR code
- `POST /api/face/login/:username` - Face login (proxies to FastAPI)

### FastAPI Backend (Port 8001)
- `GET /` - Health check
- `POST /api/face/login/:username` - Face authentication
- `POST /api/face/signup/:username` - Face registration

## Troubleshooting

### Common Issues:

1. **Port conflicts**: Make sure ports 5000, 8001, and 3000 are available
2. **Camera access**: Allow camera permissions in your browser
3. **Python dependencies**: Make sure all Python packages are installed
4. **Node modules**: Run `npm install` in both Backend and attendance-system directories

### Testing the Flow:

1. Open http://localhost:3000 in your browser
2. You should see a QR code generated by the teacher
3. Use the scanner to scan the QR code
4. The system will automatically start face authentication
5. Look at the camera when prompted
6. You should see "Face Auth Successful ðŸŽ‰" if everything works

## File Structure

```
Sihproject-attendance-system/
â”œâ”€â”€ Backend/                 # Express.js backend
â”‚   â”œâ”€â”€ controllers/         # API controllers
â”‚   â”œâ”€â”€ routes/             # API routes
â”‚   â”œâ”€â”€ models/             # Database models
â”‚   â””â”€â”€ index.js            # Main server file
â”œâ”€â”€ FaceAuth/               # FastAPI backend
â”‚   â”œâ”€â”€ main.py             # FastAPI server
â”‚   â”œâ”€â”€ face_auth_cli.py    # Face recognition CLI
â”‚   â””â”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ attendance-system/      # React frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # React components
â”‚   â”‚   â”œâ”€â”€ pages/          # Page components
â”‚   â”‚   â””â”€â”€ services/       # API services
â”‚   â””â”€â”€ package.json
â””â”€â”€ start_servers.bat       # Windows startup script
â””â”€â”€ start_servers.sh        # Linux/Mac startup script
```

## Development Notes

- The system uses OpenCV and DeepFace for face recognition
- QR codes expire after 1 minute for security
- Face authentication requires at least 1 successful match
- All servers have CORS enabled for development
